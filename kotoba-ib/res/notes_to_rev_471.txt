create_thread.php
* Проверка на бан изменена на новую. Как в index.php.
* Входные параметры теперь берутся из более общего REUQEST, а не из POST.
* Произведена ревизия функции boards_check_id.
* Ошибки board not allowed и board not found id переделаны в классы BoardNotAvailableError и BoardNotFoundIdError, соответственно.
* Произведена ревизия функций boards_get_changeable_by_id и db_boards_get_changeable_by_id. Изменено форматирование и возвразаемое значение при ошибке.
* Исправлена обработка и вывод ошибок функции boards_get_changeable_by_id.
* Произведена ревизия функции is_captcha_enabled. Изменено форматирование кода и логика.
* Произведена ревизия функций is_captcha_valid и is_animaptcha_valid. _POST изменён на _REUQEST.
* Ошибка captcha переделана в класс CaptchaError.
* Исправлен вывод ошибки при неправильном вводе капчи, анимапчи или неправильном типе капчи.
* Изменено форматирование кода и вывод ошибки при обработке перенаправления (goto), пароля.
* Ошибка max name length переделана в класс MaxNameLengthError.
* Произведена ревизия функции posts_check_name_size. Изменены возвращаемые значения.
* Изменена проверка на длинну имени и вывод ошибки. Теперь проверка на длинну имени осуществляется один раз и после всех его преобразований.
* Произведена ревизия функции calculate_tripcode. Киррилические трипкоды по-прежнему на разных имиджбордах работают по разному.
* Ошибка max subject length переделана в класс MaxSubjectLengthError.
* Произведена ревизия функции posts_check_subject_size. Изменены возвращаемые значения.
* Изменена проверка на длинну темы и вывод ошибки. Теперь проверка на длинну темы осуществляется один раз и после всех её преобразований.
* Ошибки загрузки файла переделаны в классы UploadIniSizeError, UploadFormSizeError, UploadPartialError, UploadNoTmpDirError, UploadCantWriteError, UploadExtensionError.
* Добавлена функция, проверяющая не произошло ли ошибки при загрузке файла upload_check_error.
* Проверка ошибки загрузки файла удалена из create_thread.php, вместо неё теперь используется функция upload_check_error.
* Ошибка upload filetype not supported переделана в класс UploadFiletypeNotSupportedError.
* Переменная $uploaded_file_ext заменена на $_ так как является временной и слишком длинной.
* Добавлена функция upload_types_get_by_board_ext, соответствующая ей db_upload_types_get_by_board_ext и хранимая процедура sp_upload_types_get_by_board_ext
* Получения типа загружаемых файлов переделано на использование функции upload_types_get_by_board_ext.
* Добавлена проверка расширения загружаемого файла.
* Ошибка min img size переделана в класс MinImgSizeError.
* Произведена ревизия функции images_check_size. Изменены возвращаемые значения.
* Исправлен вывод ошибки при проверке на размер изображения (images_check_size).
* Проверка на разрешение вложений видео и ссылок на макрочан переделано на использование функций is_macrochan_enabled и is_youtube_enabled.
* Изменён вывод ошибки при проверке тега макрочана.
* Ошибка max file link переделана в класс MaxFileLinkError.
* Произведена ревизия функции videos_check_code. Изменено возвращаемое значение при ошибке.
* Изменён вывод ошибки при проверки кода видео ютуба.
* Ошибка empty post переделана в класс EmptyPostError.
* При пустом сообщении теперь выводится соответствующая ошибка.
* Ошибка max text length переделана в класс MaxTextLengthError.
* Произведена ревизия функции posts_check_text_size. Изменены возвращаемые значения.
* Исправлен вывод ошибки при проверки длины текста сообщения.
* Ошибка spam переделана в класс SpamError.
* При обнаружении спама теперь выводится соответствующая ошибка.
* Размер текста проверяется теперь только в начале и в конце обработки текста.
* Произведена ревизия функций posts_check_text и check_utf8.
* Ошибка non unicode переделана в класс NonUnicodeError.
* Исправлена обработка ошибки при проверке текста (posts_check_text).
* Произведена ревизия функций spamfilter_get_all, get_extension, use_oekaki. Изменено форматирование кода.