4 группы:

1. курсив, полужирный, зачеркивание, подчёркивание
2. спойлер и циатата
3. ссылка, код
4. нумерованый и ненумерованный списки

1.1 Курсив.
Заключается в тег <i></i>. Может содержать в себе <b></b>, <s></s>, <u></u>, <i></i> и прстой не размеченный текст.

1.2 Полужирный.
Заключается в тег <b></b>. Может содержать в себе <b></b>, <s></s>, <u></u>, <i></i> и прстой не размеченный текст.

1.3 Зачёркнутый.
Заключается в тег <s></s>. Может содержать в себе <b></b>, <s></s>, <u></u>, <i></i> и прстой не размеченный текст.

1.4 Подчёркнутый.
Заключается в тег <u></u>. Может содержать в себе <b></b>, <s></s>, <u></u>, <i></i> и прстой не размеченный текст.

2.1 Спойлер.
Заключается в тег с аттрибутом <span class="spoiler"></span> (спойлер). Может содержать в себе <b></b>, <s></s>, <u></u>, <i></i>
и прстой не размеченный текст.

2.2 Цитата.
Заключается в тег <blockquote></blockquote>. Может содержать в себе <b></b>, <s></s>, <u></u>, <i></i>, <a></a> и прстой не 
размеченный текст. Цитата начинается с новой строки или с начала текста и заканчивается следующим переносом строки или концом текста.

3.1 Ссылка.
Заключается в тег <a></a>. Содержит URI или спец. ссылку на пост. Начинается с пробельного символа или начала строки, заканчивается
пробельным символом, символом / пути или концом текста. (?)

3.2 Код.
Заключается в тег <pre></pre>. Содержит простой не размеченный текст.

4. Нумерованный и ненумерованный списки.
Заключатся в теги <ul></ul> и <ol></ol> соответственно. Содержат в себе элементы, заключенные в теги <li></li>. Элементы могут
содержать в себе теги <b></b>, <s></s>, <u></u>, <i></i>, <a></a> и спойлеры. Каждый элемент списка начинается с новой строки, и
следующей за ней конструкции *пробел или цифра.пробел в зависимости от типа списка, или с начала текста и заканчивается другим
элементом, 3 и более переносами строки или концом текста. Каждый список начинается первого элемента или начала текста и заканчивается
последним элементом или концом текста.

Общие правила.

- После разметки текста, во всех многострочных размеченных областях, за исключением кода, все последовательности переносов строк
длиннее трёх урезаются до трёх.

- После разметки текста, во всех размеченных областях, за исключением кода, все последовательности пробельных символов длинее одного
урезаются до одного, так как они всё равно будут урезаны по правилам HTML, но эта предварительная работа позволит сократить объём
хранимых данных.